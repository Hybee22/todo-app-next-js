{"version":3,"file":"static/webpack/static\\development\\pages\\todo.js.fdb910d5cc57e05e3b8b.hot-update.js","sources":["webpack:///./pages/todo.js"],"sourcesContent":["import Layout from \"../components/Layout\";\r\nimport \"../scss/style.scss\";\r\nimport TodoInput from \"../components/TodoInput\";\r\nimport TodoList from \"../components/TodoList\";\r\nimport uuid from \"uuid\";\r\nimport fetch from \"isomorphic-unfetch\";\r\n\r\nclass Todo extends React.Component {\r\n  state = {\r\n    items: [],\r\n    id: uuid(),\r\n    item: \"\",\r\n    editItem: false\r\n  };\r\n\r\n  static async getInitialProps() {\r\n    const res = await fetch(\"http://127.0.0.1:3000/api/todos\");\r\n    const data = await res.json();\r\n    return { todos: data.map(entry => entry.todo) };\r\n  }\r\n  componentWillMount() {\r\n    let id = this.props.todos.map(todo => todo.id);\r\n    let title = this.props.todos.map(todo => todo.item);\r\n\r\n    let newTodo = {\r\n      id: id,\r\n      title: title\r\n    };\r\n\r\n    for( const todo in newTodo) {\r\n\r\n      const firstItems = [...this.state.items, todo];\r\n      this.setState({\r\n        items: firstItems,\r\n        id: uuid.v4(),\r\n        item: \"\",\r\n        editItem: false\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const newItem = {\r\n      id: this.state.id,\r\n      title: this.state.item\r\n    };\r\n    const updatedItem = [...this.state.items, newItem];\r\n    this.setState({\r\n      items: updatedItem,\r\n      id: uuid(),\r\n      item: \"\",\r\n      editItem: false\r\n    });\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      item: e.target.value\r\n    });\r\n  };\r\n\r\n  clearList = () => {\r\n    this.setState({\r\n      items: []\r\n    });\r\n  };\r\n\r\n  handleDelete = id => {\r\n    const filteredItems = this.state.items.filter(item => item.id !== id);\r\n    this.setState({\r\n      items: filteredItems\r\n    });\r\n  };\r\n  handleEdit = id => {\r\n    const filteredItems = this.state.items.filter(item => item.id !== id);\r\n    const sortedItem = this.state.items.find(item => item.id === id);\r\n    this.setState({\r\n      items: filteredItems,\r\n      item: sortedItem.title,\r\n      editItem: true,\r\n      id: id\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <div className=\"bg-white\">\r\n          <h3>Todo App</h3>\r\n          <div className=\"todo text-left\">\r\n            <div className=\"input\">\r\n              <TodoInput\r\n                item={this.state.item}\r\n                handleChange={this.handleChange}\r\n                handleSubmit={this.handleSubmit}\r\n                editItem={this.state.editItem}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"list\">\r\n              <TodoList\r\n                items={this.state.items}\r\n                clearList={this.clearList}\r\n                handleDelete={this.handleDelete}\r\n                handleEdit={this.handleEdit}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Todo;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAiCA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;;;;;;AAjEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;;;AA8CA;AACA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAQA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAWA;;;;;;;;;;;;;AAjGA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAZA;AACA;AA4GA;;;;A","sourceRoot":""}